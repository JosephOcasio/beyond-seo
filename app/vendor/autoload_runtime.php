<?php

// autoload_runtime.php @generated by Symfony Runtime
// Patched for RankingCoach plugin to use custom composer loader

$autoloadPath = __DIR__ . '/autoload_patched.php';
if (!file_exists($autoloadPath)) {
    // fallback to default composer autoload
    $autoloadPath = __DIR__ . '/autoload.php';
}

if (true === (require_once $autoloadPath) || empty($_SERVER['SCRIPT_FILENAME'])) {
    return;
}

$app = require $_SERVER['SCRIPT_FILENAME'];

if (!is_object($app)) {
    throw new TypeError(sprintf(
        'Invalid return value: callable object expected, "%s" returned from "%s".',
        get_debug_type($app),
        $_SERVER['SCRIPT_FILENAME']
    ));
}

if (PHP_VERSION_ID >= 80300) {
    // swallow only deprecated assert.warning errors
    set_error_handler(function ($errno, $errstr) {
        if (str_contains($errstr, 'assert.')) {
            return true;
        }
        return false;
    });
}

$runtime = $_SERVER['APP_RUNTIME'] ?? $_ENV['APP_RUNTIME'] ?? 'Symfony\\Component\\Runtime\\SymfonyRuntime';
$runtime = new $runtime(($_SERVER['APP_RUNTIME_OPTIONS'] ?? $_ENV['APP_RUNTIME_OPTIONS'] ?? []) + [
        'project_dir' => dirname(__DIR__, 1),
    ]);

[$app, $args] = $runtime
    ->getResolver($app)
    ->resolve();

$app = $app(...$args);

exit(
$runtime
    ->getRunner($app)
    ->run()
);
